import{C as f,o as s,c as l,a as c,b as d,F as p,r as g,p as _,d as y,e as b,t as v,f as w,g as k}from"./vendor.cbf14d0e.js";const C=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function a(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerpolicy&&(r.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?r.credentials="include":e.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(e){if(e.ep)return;e.ep=!0;const r=a(e);fetch(e.href,r)}};C();var D=(t,n)=>{const a=t.__vccOpts||t;for(const[i,e]of n)a[i]=e;return a};async function m(t,n,a){const i=[];for await(let e of t.values())a?!e.name.match(a)&&e.name.match(n)&&i.push(e):e.name.match(n)&&i.push(e);return i}async function F(t,n,a){const e=await(await n.getFileHandle(a,{create:!0})).createWritable({});await e.write(t),await e.close()}let u=null;const I={data(){return{files:[],parent:null,editing:null,thumbs:[]}},methods:{async findThumbs(){this.thumbs=await m(this.parent,/.+\.thumb\.png/)},async openDir(){this.parent=await window.showDirectoryPicker(),!!this.parent&&(this.files=await m(this.parent,/.+\.png/,/.+\.thumb\.png/),this.findThumbs())},async loadCropper(t){let n=new FileReader;n.onload=async()=>{const a=n.result,i=new Image;i.src=a,u.replace(a),this.editing=t},n.readAsDataURL(await t.getFile())},crop(){u.getCroppedCanvas({width:300,height:300,minWidth:300,minHeight:300,maxWidth:4096,maxHeight:4096,fillColor:"#fff",imageSmoothingEnabled:!0,imageSmoothingQuality:"high"}).toBlob(async t=>{await F(t,this.parent,this.editing.name.replace(/\.png/,".thumb.png")),await this.findThumbs()})}},computed:{hasThumbnail(){return this.thumbs.map(t=>t.name.replace(".thumb.png",".png"))}},mounted(){const t=document.getElementById("image");u=new f(t,{aspectRatio:1,crop(n){}})}},S=t=>(_("data-v-348c026c"),t=t(),y(),t),L=S(()=>c("img",{id:"image"},null,-1)),T={key:0},x=["onClick"],B={key:0};function N(t,n,a,i,e,r){return s(),l(p,null,[c("button",{onClick:n[0]||(n[0]=(...o)=>r.openDir&&r.openDir(...o))},"Open Dir"),L,e.editing?(s(),l("div",T,[c("div",null,[c("button",{onClick:n[1]||(n[1]=(...o)=>r.crop&&r.crop(...o))},"Save Thumbnail")])])):d("",!0),c("div",null,[(s(!0),l(p,null,g(e.files,(o,h)=>(s(),l("div",{class:"item",key:h,onClick:W=>r.loadCropper(o)},[b(v(o.name)+" ",1),r.hasThumbnail.includes(o.name)?(s(),l("span",B,"\u2714")):d("",!0)],8,x))),128))])],64)}var O=D(I,[["render",N],["__scopeId","data-v-348c026c"]]);const H={setup(t){return(n,a)=>(s(),w(O))}};k(H).mount("#app");
